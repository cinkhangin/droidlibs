---
import type {CollectionEntry} from "astro:content";
import {Categories} from "../consts.ts";

type Props = CollectionEntry<'libraries'>;
const library = Astro.props;
const category = Categories.find(cat => cat.id === library.data.category);
const categoryName = category ? category.name : '';
---

<a href={`/library/${library.data.id}`}>
    <div class="library-card group bg-[#fafafa] border-2 border-white p-5 hover:border-emerald-500/50 hover:bg-emerald-500/2 transition-all duration-300 cursor-pointer relative overflow-hidden">
        <div class="flex justify-between items-start mb-3">
            <div class="flex flex-row gap-2 items-center">
                <h3 class="text-sm font-bold text-zinc-500 group-hover:text-emerald-400 transition-colors">
                    {library.data.name}
                </h3>
                <span class="text-[10px] text-zinc-600 font-mono tracking-tighter">
        v{library.data.latestVersion}
      </span>
            </div>

            <div class="flex gap-1 items-center">
                <img src="/ic_star.svg" alt="star" class="w-3 h-3 text-emerald-500"/>
                <span class="text-xs text-zinc-500 font-mono uppercase tracking-widest">
        {library.data.stars}k+
      </span>
            </div>
        </div>

        <p class="text-zinc-500 text-xs mb-6 line-clamp-2 leading-relaxed truncate">
            {library.data.description}
        </p>

        <div class="flex items-center justify-between">
            <div class="flex gap-2">
      <span class="text-[9px] text-zinc-700 font-bold px-1.5 py-0.5 font-mono lowercase">
        #{categoryName}
      </span>
            </div>
        </div>
    </div>
</a>